<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Çø„Çπ„ÇØË©≥Á¥∞ - Buzzlog</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <div class="logo-header">
                <div class="logo-icon">üí°</div>
                <div class="logo-text">
                    <span class="logo-buzz">Buzz</span><span class="logo-log">log</span>
                </div>
            </div>
            <div class="header-actions">
                <button onclick="window.location.href='dashboard.html'" class="back-btn">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´Êàª„Çã</button>
                <button onclick="logout()" class="logout-btn">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            </div>
        </div>
    </header>

    <main class="detail-container">
        <div class="task-detail-section">
            <div class="task-detail-header">
                <div class="task-header-info">
                    <span id="taskIdDisplay" class="task-id-detail">„Çø„Çπ„ÇØID</span>
                    <h2 id="taskTitle"></h2>
                </div>
                <button onclick="enableEdit()" class="edit-btn">Á∑®ÈõÜ</button>
            </div>

            <div class="task-detail-content">
                <div class="detail-row">
                    <label>„Çø„Çπ„ÇØ„Çø„Ç§„Éó:</label>
                    <span id="taskTypeDisplay"></span>
                    <select id="taskTypeSelect" style="display: none;" onchange="onTaskTypeChange()">
                        <option value="department">ÈÉ®ÁΩ≤„Çø„Çπ„ÇØ</option>
                        <option value="project">„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Çø„Çπ„ÇØ</option>
                        <option value="personal">ÂÄã‰∫∫„Çø„Çπ„ÇØ</option>
                    </select>
                </div>

                <div class="detail-row">
                    <label>„Çπ„ÉÜ„Éº„Çø„Çπ:</label>
                    <select id="taskStatus" disabled>
                        <option value="Êú™ÂØæÂøú">Êú™ÂØæÂøú</option>
                        <option value="Âá¶ÁêÜ‰∏≠">Âá¶ÁêÜ‰∏≠</option>
                        <option value="Âá¶ÁêÜÂÆå‰∫Ü">Âá¶ÁêÜÂÆå‰∫Ü</option>
                        <option value="ÁµÇ‰∫Ü">ÁµÇ‰∫Ü</option>
                    </select>
                </div>

                <div class="detail-row">
                    <label>ÂÑ™ÂÖàÂ∫¶:</label>
                    <span id="taskPriorityDisplay"></span>
                    <select id="taskPrioritySelect" style="display: none;">
                        <option value="high">È´ò</option>
                        <option value="medium">‰∏≠</option>
                        <option value="low">‰Ωé</option>
                    </select>
                </div>

                <div class="detail-row">
                    <label>ÊãÖÂΩìËÄÖ:</label>
                    <div class="assignee-container">
                        <div id="assigneeDisplay" class="assignees-display">
                            <!-- ÊãÖÂΩìËÄÖ„Éê„ÉÉ„Ç∏„ÅåË°®Á§∫„Åï„Çå„Çã -->
                        </div>
                        <div id="assigneeEditContainer" class="dropdown-checkbox-container" style="display: none;">
                            <button type="button" id="assigneeEditDropdownBtn" class="dropdown-checkbox-btn">
                                <span class="dropdown-text placeholder">ÊãÖÂΩìËÄÖ„ÇíÈÅ∏Êäû</span>
                                <span class="dropdown-arrow">‚ñº</span>
                            </button>
                            <div id="assigneeEditDropdownMenu" class="dropdown-checkbox-menu" style="display: none;">
                                <!-- Á∑®ÈõÜÊôÇ„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅåË°®Á§∫„Åï„Çå„Çã -->
                            </div>
                            <div id="assigneeEditPreview" class="selected-assignees-preview">
                                <!-- Á∑®ÈõÜÊôÇ„ÅÆÈÅ∏ÊäûÊ∏à„ÅøÊãÖÂΩìËÄÖ„ÅÆ„Éê„ÉÉ„Ç∏„ÅåË°®Á§∫„Åï„Çå„Çã -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="detail-row" id="projectRow" style="display: none;">
                    <label>„Éó„É≠„Ç∏„Çß„ÇØ„Éà:</label>
                    <span id="taskProjectDisplay"></span>
                    <select id="taskProjectSelect" style="display: none;">
                        <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                    </select>
                </div>

                <div class="detail-row">
                    <label>Ê¶ÇË¶Å:</label>
                    <textarea id="taskDescription" disabled rows="4"></textarea>
                </div>

                <div class="detail-row">
                    <label>ÈñãÂßãÊó•:</label>
                    <input type="date" id="taskStartDate" disabled>
                </div>

                <div class="detail-row">
                    <label>ÁµÇ‰∫ÜÊó•:</label>
                    <input type="date" id="taskEndDate" disabled>
                </div>

                <div class="detail-actions" id="editActions" style="display: none;">
                    <button onclick="saveTaskChanges()" class="save-btn">‰øùÂ≠ò</button>
                    <button onclick="cancelEdit()" class="cancel-btn">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </div>

            <div class="history-section">
                <h3>Â§âÊõ¥Â±•Ê≠¥</h3>
                <div id="historyList" class="history-list"></div>
            </div>
        </div>

        <div class="comment-section">
            <h3>„Ç≥„É°„É≥„Éà</h3>
            
            <div class="comment-form">
                <textarea id="commentInput" placeholder="„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ..." rows="3"></textarea>
                <button onclick="addComment()" class="comment-btn">„Ç≥„É°„É≥„Éà„ÇíÊäïÁ®ø</button>
            </div>

            <div id="commentList" class="comment-list"></div>
        </div>
    </main>

    <script src="firebase-config.js"></script>
    <script src="auth.js"></script>
    <script src="data.js"></script>
    <script src="task-detail.js"></script>
</body>
</html>